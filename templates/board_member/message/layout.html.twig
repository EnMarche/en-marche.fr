{% extends 'board_member/layout.html.twig' %}

{% block javascripts %}
    {% import 'javascript.js.twig' as js %}

    <script src="{{ asset('ckeditor/ckeditor.js') }}"></script>
    <script src="{{ asset('ckeditor/lang/fr.js') }}"></script>
    <script type="text/javascript">
        Kernel.onLoad(function() {
            {{ js.ckeditor('board_member_message_content') }}
        });
    </script>
{% endblock %}

{% block content__inner %}
    <div class="l__wrapper--slim">
        <div>
            <a href="{%- block return_path path('app_board_member_search') -%}" class="link--newblue text--small b__nudge--top-5">
                Retour
            </a>
        </div>
        <h3>Envoyer un message</h3>

        {% block recipients '' %}

        <div class="space--30-0">
            {{ form_start(form) }}
            {{ form_errors(form) }}

            <div class="form__row">
                {{ form_label(form.subject, 'Destinataires') }}
                <input type="text" disabled="disabled" class="form form__field form--full" value="{{ message.recipients|length }} marcheurs(s)" />
            </div>

            <div class="form__row">
                {{ form_label(form.subject, 'Exp√©diteur') }}
                <input type="text" disabled="disabled" class="form form__field form--full" value="{{ app.user.fullName }}" />
            </div>

            <div class="form__row">
                {{ form_label(form.subject, 'Objet') }}
                {{ form_errors(form.subject) }}
                {{ form_widget(form.subject, {'attr': {'class': 'form--full'}}) }}
            </div>

            <div class="form__row">
                {{ form_label(form.content, 'Message') }}
                {{ form_errors(form.content) }}
                {{ form_widget(form.content, {'attr': {'class': 'form--full form__field--textarea-300'}}) }}
            </div>

            <button class="btn btn--blue b__nudge--bottom-small" type="submit">
                Envoyer le message
            </button>
            <a href="{{- block('return_path') -}}" class="btn">
                Annuler
            </a>

            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
